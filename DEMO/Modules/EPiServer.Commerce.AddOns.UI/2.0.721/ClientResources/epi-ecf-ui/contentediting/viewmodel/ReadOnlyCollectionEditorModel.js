//>>built
define("epi-ecf-ui/contentediting/viewmodel/ReadOnlyCollectionEditorModel",["dojo/_base/declare","dojo/_base/lang","dojo/when","epi/dependency","epi-cms/dgrid/formatters","epi-cms/contentediting/editors/model/CollectionEditorModel"],function(_1,_2,_3,_4,_5,_6){return _1([_6],{_storeKey:null,_store:null,_contentStructureStore:null,_contentLink:null,isInMasterLanguage:null,postscript:function(){var _7=_4.resolve("epi.storeregistry");this._store=this._store||_7.get(this._storeKey);this._contentStructureStore=this._contentStructureStore||_7.get("epi.cms.content.light");this.inherited(arguments);},_dataSetter:function(_8){this._contentLink=_8;if(!_8){this.data=_8;this._initData();return;}_3(this._store.query(this.createQuery(_8)),_2.hitch(this,function(_9){if(_9.models){this.data=_9.models;}else{this.data=_9;}this._initData();}));_3(this.getCurrentContent(),_2.hitch(this,function(_a){this.set("isInMasterLanguage",_a.currentLanguageBranch.isMasterLanguage);}));},_dataGetter:function(){return this._contentLink;},createQuery:function(_b){return {referenceId:_b};},getCurrentContent:function(){return this._contentStructureStore.get(this.get("data"));},generateFormatters:function(_c){this.inherited(arguments);var _d=_c["contentTypeIdentifier"];if(_d){_d.formatter=_2.hitch(this,_5.contentIcon);}for(var _e in _c){_2.setObject("sortable",false,_c[_e]);}return _c;}});});