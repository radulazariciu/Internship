//>>built
define("epi-ecf-ui/contentediting/viewmodel/_BaseEntryCollectionEditorModel",["dojo/_base/declare","dojo/_base/lang","dojo/Evented","dojo/promise/all","dojo/Stateful","dojo/when","epi/dependency","epi/shell/command/DelegateCommand","epi/i18n!epi/nls/episerver.shared"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1([_5,_3],{storeKey:null,resources:null,postscript:function(){this.inherited(arguments);this.storeRegistry=_7.resolve("epi.storeregistry");this.store=this.store||this.storeRegistry.get(this.storeKey);this.metadataManager=this.metadataManager||_7.resolve("epi.shell.MetadataManager");},getCommands:function(_a,_b){var _c={category:_b,model:_a,canExecute:true,isAvailable:true};return [new _8(_2.mixin({name:"remove",label:this.resources.commands.remove,iconClass:"epi-iconClose",delegate:_2.hitch(this,function(_d){this.emit("removeCommandEvent");})},_c))];},addItem:function(_e){return _6(this.store.add(_e),_2.hitch(this,function(_f){this.emit("itemAdded",{id:_f.id});}));},removeItems:function(_10){var _11=[];for(var i=0,j=_10.length;i<j;i+=1){_11.push(this.store.remove(_10[i].id));}return _4(_11).then(_2.hitch(this,function(_12){this.emit("itemsRemoved");}));},getListCommand:function(_13){return new _8({name:"add",label:this.resources.addlabel,tooltip:_9.action.add,iconClass:"epi-iconPlus",canExecute:true,isAvailable:true,delegate:_2.hitch(this,this.addItemDelegate)});},addItemDelegate:function(){this.emit("toggleItemEditor",null);},moveItem:function(_14,_15,_16){this._setSortOrder(_14,_15,_16);return _6(this.store.put(_14),_2.hitch(this,function(_17){this.emit("itemSaved",{id:_17.id});}));},_setSortOrder:function(_18,_19,_1a){if(_19){_18.sortOrder=_1a?_19.sortOrder:_19.sortOrder+1;}}});});