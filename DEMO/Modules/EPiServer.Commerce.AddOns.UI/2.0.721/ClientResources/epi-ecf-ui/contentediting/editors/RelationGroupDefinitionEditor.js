//>>built
define("epi-ecf-ui/contentediting/editors/RelationGroupDefinitionEditor",["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-construct","dojo/dom-style","dojo/dom-geometry","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","dgrid/OnDemandGrid","dgrid/Selection","epi/dependency","epi/shell/command/_Command","epi/shell/command/builder/ButtonBuilder","epi/shell/widget/dialog/_DialogContentMixin","./AddRelationGroupDefinitionCommand","epi/i18n!epi/cms/nls/commerce.contentediting.editors.relationgroupeditor"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10){return _1([_7,_8,_e],{templateString:"<div><div data-dojo-attach-point=\"addNode\"></div></div>",store:null,grid:null,addButton:null,_builder:null,constructor:function(){this.store=this.store||_b.resolve("epi.storeregistry").get("epi.commerce.relationgroupdefinition");this._builder=new _d({settings:{showLabel:false}});},postCreate:function(){this.inherited(arguments);this.addButton=new _f();this._builder.create(this.addButton,this.addNode);this._setupGrid();this.own(_3.after(this.addButton,"onSaved",_2.hitch(this,function(){this.grid.refresh();})));},_setupGrid:function(){var _11=_1([_9,_a]);this.grid=new _11({columns:{name:_10.groupname,action:{className:"epi-columnNarrow",renderHeaderCell:function(_12){},renderCell:_2.hitch(this,function(_13,_14,_15,_16){var _17=new _c({iconClass:"epi-iconClose",canExecute:true,_execute:_2.hitch(this,function(){this.store.remove(_13.name).then(_2.hitch(this,function(){this.grid.refresh();}));})});this._builder.create(_17,_15);})}},store:this.store,className:"epi-plain-grid"});this.grid.set("query",{});this.own(this.grid);_4.place(this.grid.domNode,this.domNode);},layout:function(){this.inherited(arguments);var _18=this.getParent();if(_18&&_18.containerNode){var _19=_5.get(_18.containerNode,"height"),_1a=Math.max(_6.getMarginBox(this.grid.headerNode).h,_5.get(this.grid.bodyNode,"margin")),_1b=_6.getMarginBox(this.addNode).h;_5.set(this.domNode,"height",_19+"px");_5.set(this.grid.contentNode,"height",(_19-_1b-_1a)+"px");}}});});