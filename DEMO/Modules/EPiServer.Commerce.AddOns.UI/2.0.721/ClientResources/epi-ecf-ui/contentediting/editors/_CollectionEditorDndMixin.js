//>>built
define("epi-ecf-ui/contentediting/editors/_CollectionEditorDndMixin",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","dojo/dom-class","dojo/aspect","epi-cms/dgrid/DnD"],function(_1,_2,_3,_4,_5,_6,_7){return _2([],{_dndNodeCreator:function(_8,_9){var _a=this.allowedDndTypes,_b=_4.create("div");return {"node":_b,"type":_a,"data":_8};},_setupDnD:function(){this.own(_6.after(this.grid.dndSource,"onDndStart",_3.hitch(this,function(_c,_d,_e){var _f=this.grid.dndSource,_10=_f.accept&&_f.checkAcceptance(_c,_d);_5[_10?"add":"remove"](this.overlayDnd,this.gridOverlayClass);}),true),_6.after(this.grid.dndSource,"onDropData",_3.hitch(this,this.onDndDrop),true));},onDndDrop:function(_11,_12,_13,_14){var i;if(this.grid.dndSource===_12){for(i=0;i<_13.length;i++){this.model.moveItem(this.grid.dndSource.getItem(_13[i].id).data,this.grid.dndSource.current!=null?this.grid.dndSource.getItem(this.grid.dndSource.current.id).data:null,this.grid.dndSource.before);}}else{this.onDropping&&this.onDropping();this.onFocus();for(i=0;i<_11.length;i++){this._addItem(_11[i]);if(_12&&_12.grid&&_12.grid.consumer&&_12.grid.consumer!==this){_12.grid.consumer.model.removeItem(this.grid.dndSource.getItem(_13[i].id).data);}}}}});});