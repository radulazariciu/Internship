//>>built
define("epi-ecf-ui/widget/overlay/CommerceMediaCollection",["dojo/_base/declare","dojo/_base/lang","dojo/when","epi-cms/widget/overlay/ItemCollection","epi/string","../../component/CommerceMediaItemModel"],function(_1,_2,_3,_4,_5,_6){return _1([_4],{modelType:"epi-ecf-ui/contentediting/editors/model/CommerceMediaCollectionEditorModel",onDrop:function(_7,_8){var _9=null,_a=this.model.get("items");if(_a){_9=_a[0];}_3(this.model.addItem(_8,_9,true),_2.hitch(this,function(){var _b=this.model.get("data");this.onValueChange({propertyName:this.name,value:_b});}));},_setupModel:function(_c){var _d=_5.slashName(this.modelType);require([_d],_2.hitch(this,function(_e){var _f={};_f.itemModelType=_6;_f.itemType="EPiServer.Commerce.AddOns.UI.ObjectEditing.InternalMetadata.CommerceMediaModel";this.model=new _e(_f,this.modelParams);this.model.set("data",_c);}));},_setupAllowedTypes:function(){var _10=this.modelParams.itemConverterKey,_11=this.modelParams.customTypeIdentifier;this.allowedDndTypes=this.allowedDndTypes||[];if(_10){_11=_11+"."+_10;}if(_11){this.allowedDndTypes.unshift(_11);}}});});